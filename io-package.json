{
    "common": {
        "name": "influxdb",
        "desc": {
            "en": "Logging of states into InfluxDB",
            "de": "Loggt die Historie von einzelnen Zuständen in einer InfluxDB",
            "ru": "Сохраняет историю событий для отдельных состояний в InfluxDB"
        },
        "version": "1.4.1",
        "title":                    "History with InfluxDB",
        "news": {
            "1.4.1": {
                "en": "Changed Debounce-Feature to log the last stable value that did not changed for given time!! Add option to define storage datatype per datapoint inclusing converting the value if needed",
                "de": "Debounce-Feature geändert, sodass der letzte Wert der in der angegeben Zeit stabil geblieben ist geloggt wird!! Hinzufügen der Option den Speicher-Datenyp eines Datenpunktes inklusive der nötigen Konvertierung definieren zu können",
                "ru": "Changed Debounce-Feature to log the last stable value that did not changed for given time!! Add option to define storage datatype per datapoint inclusing converting the value if needed"
            },
            "1.3.4": {
                "en": "Small fix for older configurations",
                "de": "Kleine Fehlerbehebung für ältere Konfigurationen",
                "ru": "Small fix for older configurations"
            },
            "1.3.3": {
                "en": "Enhance handling of DB outages with mass writes afterwards",
                "de": "Behandlung von DB-Ausfällen und folgenden Massen-Schreibaktionen verbessert",
                "ru": "Enhance handling of DB outages with mass writes afterwards"
            },
            "1.3.2": {
                "en": "Enhance Min-Delta logic for datapoints from type mixed",
                "de": "Min-Delta-Logik verbessert für Mixed-Datenpunkte",
                "ru": "Enhance Min-Delta logic for datapoints from type mixed"
            },
            "1.3.1": {
                "en": "Fix handling of float values in Adapter config and Datapoint config.",
                "de": "Fehlerbehebung bei der Eingabe von Zahlen mit Kommastellen in der Adapter- und Datenpunk-Konfiguration.",
                "ru": "Fix handling of float values in Adapter config and Datapoint config."
            },
            "1.3.0": {
                "en": "Add messages enableHistory/disableHistory/getEnabledDPs, add support to log changes only if value differs a minimum value for numbers.",
                "de": "Messages enableHistory/disableHistory/getEnabledDPs hinzugefügt, Unterstützung zum Loggen wenn der Zahlenwert um einen Mindestwert abweicht.",
                "ru": "Add messages enableHistory/disableHistory/getEnabledDPs, add support to log changes only if value differs a minimum value for numbers."
            },
            "1.2.1": {
                "en": "small enhancements and fixes",
                "de": "Kleinere Verbesserungen und Fehlerbehebungen",
                "ru": "small enhancements and fixes"
            },
            "1.2.0": {
                "en": "enhance relogging to also relog states that are not regularly updated (timed-relog)\ntry to do type converting between float <—> boolean when type error is returned by InfluxDB\nenhance getHistory for better handing on time boundaries",
                "de": "Re-Logging erweitert um auch selten aktualisierte Werte regelmäßig zu loggen.\nTyp-Konvertierung boolean <--> float bei Typ-Fehlern\ngetHistory um bessere Behandlung an den Zeitgrenzen erweitert",
                "ru": "enhance relogging to also relog states that are not regularly updated (timed-relog)\ntry to do type converting between float <—> boolean when type error is returned by InfluxDB\nenhance getHistory for better handing on time boundaries"
            },
            "1.1.1": {
                "en": "small final change on custom dialog",
                "de": "Kleine Änderungen in Einstellungendialog",
                "ru": "Маленькие изменения диалого настройки"
            },
            "1.1.0": {
                "en": "optimizations and enhancements for high traffic situations\nBugfix if InfluxDB is unavailable\nadd functions getConflictingPoints and resetConflictingPoints\nadd option to re-log unchanged values to make it easier for visualization",
                "de": "Optimierungen und Verbesserungen für High-Traffic-Situationen\nBugfix falls InfluxDB nicht mehr verfügbar ist\nNeue Funktionen getConflictingPoints und resetConflictingPoints hinzugefügt\nNeue Option hinzugefügt um nicht-geänderte Werte in definierten Abständen zu loggen um Visualisierungen einfacher zu machen.",
                "ru": "optimizations and enhancements for high traffic situations\nBugfix if InfluxDB is unavailable\nadd functions getConflictingPoints and resetConflictingPoints\nadd option to re-log unchanged values to make it easier for visualization"
            },
            "1.0.1": {
                "en": "changed storing values to asynchronous way\nadd support for „minmax“ aggregate type on getHistory",
                "de": "Async Speichernvon Werten\nUnterstützung von minmax für getHistory",
                "ru": "сохранение данных асинхронно\nподдержка minmax в getHistory"
            },
            "1.0.0": {
                "en": "bulk write into DB\nbuffer values if no connection to DB",
                "de": "Massenschreiben in die DB\nPuffern der Werte falls keine Verbindung mit DB",
                "ru": "Запись нескольких значений за раз\nБуферизация значений, если нет соединения с базой"
            },
            "0.5.3": {
                "en": "enhance and correct documentation\nimplement step calculation for aggregation if only count is set",
                "de": "Dokumentation erweitert\nSchrittkalkulation implementiert, falls nur count gesetzt ist",
                "ru": "Исправлена документация\nВычисление шага, если задано только количество точек"
            },
            "0.5.2": {
                "en": "change custom queries. Fix delete DB",
                "de": "Anwenderanfragen und DB-Löschen korrigiert ",
                "ru": "исправлены пользовательские запросы и удаление базы"
            },
            "0.5.1": {
                "en": "fix step settings",
                "de": "Schritt korrigiert",
                "ru": "исправлен шаг"
            },
		    "0.5.0": {
                "en": "сompatible only with new admin",
                "de": "Nur mit neuem Admin kompatibel",
                "ru": "Совместимо только с новым админ-драйвером"
            },
            "0.4.0": {
                "en": "change name of object from history to custom",
                "de": "Ändere Name vom Storage-Object von history nach custom",
                "ru": "Изменено имя объекта для настроек с history на custom"
            },
            "0.3.2": {
                "en": "better error handling",
                "de": "better error handling",
                "ru": "better error handling"
            },
            "0.3.1": {
                "en": "update packages",
                "de": "update packages",
                "ru": "update packages"
            },
            "0.3.0": {
                "en": "support of milliseconds instead of seconds\n(bluefox) make onchange work",
                "de": "support of milliseconds instead of seconds\n(bluefox) make onchange work",
                "ru": "support of milliseconds instead of seconds\n(bluefox) make onchange work"
            }
        },
        "mode":                     "daemon",
        "platform":                 "Javascript/Node.js",
        "loglevel":                 "info",
        "messagebox":               true,
        "subscribe":                "messagebox",
        "keywords":                 ["charts", "logging", "influxdb"],
        "preserveSettings":         "custom",
        "supportCustoms":           true,
        "getHistory":           	true,
        "enabled":                  true,
		"dependencies":             [{"js-controller": ">=0.12.0","admin": ">=1.6.10"}],
        "stopBeforeUpdate":         true,
        "restartAdapters":          ["influxdb"],
        "authors": [
            "Bluefox <dogafox@gmail.com>"
        ],
        "license":                  "MIT",
        "readme":                   "https://github.com/ioBroker/ioBroker.influxdb/blob/master/README.md",
        "icon":                     "influxdb.png",
        "extIcon":                  "https://raw.githubusercontent.com/ioBroker/ioBroker.influxdb/master/admin/influxdb.png",
		"type":                     "storage",
        "config":{
            "minWidth":  570,
            "width ":    435,
            "minHeight": 200,
            "height":    540
        }
    },
    "native": {
        "debounce":                  1000,
        "retention":                 31536000,
        "dbname":                    "iobroker",
        "host":                      "localhost",
        "protocol":                  "http",
        "port":                      8086,
        "user":                      "",
        "password":                  "",
        "round":                     4,
        "seriesBufferMax":           0,
        "seriesBufferFlushInterval": 600,
        "changesRelogInterval":      0,
        "changesMinDelta": 0
    },
    "instanceObjects": [
        {
            "_id":  "info",
            "type": "channel",
            "common": {
                "name": "Information"
            },
            "native": {}
        },
        {
            "_id":  "info.connection",
            "type": "state",
            "common": {
                "role":  "indicator.connected",
                "name":  "If connected to InfluxDB",
                "type":  "boolean",
                "read":  true,
                "write": false,
                "def":   false
            },
            "native": {}
        }
    ],
    "objects": [
        {
            "_id": "_design/custom",
            "language": "javascript",
            "views": {
                "state": {
                    "map": "function(doc) { if (doc.type==='state' && (doc.common.custom || doc.common.history)) emit(doc._id, doc.common.custom || doc.common.history) }"
                }
            }
        }
    ]
}
